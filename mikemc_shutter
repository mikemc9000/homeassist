blueprint:
  name: Rollo Steuerung mit zwei Tasten
  description: Steuere ein Rollo mit zwei Tasten (rauf und runter), das bei erneutem Dr체cken anh채lt.
  domain: automation
  input:
    rollo:
      name: Rollo
      description: Die zu steuernde Rollo
      selector:
        entity:
          domain: cover
    button_up:
      name: Taste Rauf
      description: Die Taste, die das Rollo hochf채hrt
      selector:
        entity:
          domain: button
    button_down:
      name: Taste Runter
      description: Die Taste, die das Rollo runterf채hrt
      selector:
        entity:
          domain: button

variables:
  rollo: !input rollo
  button_up: !input button_up
  button_down: !input button_down

trigger:
  - platform: state
    entity_id: !input button_up
    to: 'on'
  - platform: state
    entity_id: !input button_down
    to: 'on'

condition: []

action:
  - choose:
      - conditions:
          - condition: trigger
            id: 'button_up'
        sequence:
          - choose:
              - conditions:
                  - condition: state
                    entity_id: !input rollo
                    state: 'opening'
                sequence:
                  - service: cover.stop_cover
                    target:
                      entity_id: !input rollo
              - conditions:
                  - condition: state
                    entity_id: !input rollo
                    state: 'closed'
                sequence:
                  - service: cover.open_cover
                    target:
                      entity_id: !input rollo
              - conditions:
                  - condition: state
                    entity_id: !input rollo
                    state: 'open'
                sequence:
                  - service: cover.stop_cover
                    target:
                      entity_id: !input rollo
              - conditions:
                  - condition: state
                    entity_id: !input rollo
                    state: 'stopped'
                sequence:
                  - service: cover.open_cover
                    target:
                      entity_id: !input rollo
      - conditions:
          - condition: trigger
            id: 'button_down'
        sequence:
          - choose:
              - conditions:
                  - condition: state
                    entity_id: !input rollo
                    state: 'closing'
                sequence:
                  - service: cover.stop_cover
                    target:
                      entity_id: !input rollo
              - conditions:
                  - condition: state
                    entity_id: !input rollo
                    state: 'open'
                sequence:
                  - service: cover.close_cover
                    target:
                      entity_id: !input rollo
              - conditions:
                  - condition: state
                    entity_id: !input rollo
                    state: 'closed'
                sequence:
                  - service: cover.stop_cover
                    target:
                      entity_id: !input rollo
              - conditions:
                  - condition: state
                    entity_id: !input rollo
                    state: 'stopped'
                sequence:
                  - service: cover.close_cover
                    target:
                      entity_id: !input rollo
